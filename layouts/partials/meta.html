{{/* Generate page-specific meta description */}} {{- $description := "" -}} {{- if .Description -}} {{- $description = .Description -}} {{- else if .Summary -}} {{- $description = .Summary | truncate
160 -}} {{- else if .IsHome -}} {{- $description = .Site.Params.description -}} {{- else if eq .Section "game" -}} {{- $description = printf "%s - %s" .Site.Params.game.title .Site.Params.game.tagline
-}} {{- else -}} {{- $description = .Site.Params.description -}} {{- end -}} {{/* Generate page-specific keywords */}} {{- $keywords := slice -}} {{- if .Params.tags -}} {{- $keywords = .Params.tags
-}} {{- else if .Params.keywords -}} {{- $keywords = .Params.keywords -}} {{- else if eq .Section "game" -}} {{- $keywords = slice "PCゲーム" "ゲーム" .Site.Params.game.title -}} {{- if .Params.genre
-}} {{- $keywords = $keywords | append .Params.genre -}} {{- end -}} {{- else if eq .Section "news" -}} {{- $keywords = slice "ゲームニュース" "アップデート" "お知らせ" -}} {{- else -}} {{- $keywords
= slice "PCゲーム" "インディーゲーム" "ゲーム開発" -}} {{- end -}} {{/* Generate page title */}} {{- $title := "" -}} {{- if .IsHome -}} {{- $title = .Site.Title -}} {{- else if eq .Section "game" -}}
{{- $title = printf "%s | %s" .Site.Params.game.title .Site.Title -}} {{- else -}} {{- $title = printf "%s | %s" .Title .Site.Title -}} {{- end -}} {{/* Generate OG image */}} {{- $ogImage := "" -}}
{{- if .Params.featured_image -}} {{- $ogImage = .Params.featured_image | absURL -}} {{- else if .Params.image -}} {{- $ogImage = .Params.image | absURL -}} {{- else if eq .Section "game" -}} {{-
$ogImage = .Site.Params.game.heroImage | absURL -}} {{- else if .Site.Params.default_image -}} {{- $ogImage = .Site.Params.default_image | absURL -}} {{- else -}} {{- $ogImage =
"/images/placeholder.jpg" | absURL -}} {{- end -}}

<!-- Basic Meta Tags -->
<meta name="description" content="{{ $description }}" />
<meta name="keywords" content="{{ delimit $keywords ", " }}" />
<meta name="author" content="{{ .Site.Params.author.name | default .Site.Title }}" />
<meta name="robots" content="{{ if .Params.noindex }}noindex, nofollow{{ else }}index, follow{{ end }}" />
<meta name="googlebot" content="{{ if .Params.noindex }}noindex, nofollow{{ else }}index, follow{{ end }}" />

<!-- Open Graph / Facebook -->
{{- if eq .Section "game" -}}
<meta property="og:type" content="product" />
{{- else if .IsPage -}}
<meta property="og:type" content="article" />
{{- else -}}
<meta property="og:type" content="website" />
{{- end -}}
<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:locale" content="{{ .Site.LanguageCode | default "ja_JP" }}" />
<meta property="og:image" content="{{ $ogImage }}" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="{{ if .Params.featured_image_alt }}{{ .Params.featured_image_alt }}{{ else }}{{ $title }}{{ end }}" />

{{/* Game-specific OG tags */}} {{- if eq .Section "game" -}}
<meta property="product:price:amount" content="{{ .Params.price | default .Site.Params.game.price }}" />
<meta property="product:price:currency" content="JPY" />
<meta property="product:availability" content="in stock" />
<meta property="product:condition" content="new" />
<meta property="product:retailer_item_id" content="{{ .Site.Params.game.title | urlize }}" />
{{- end -}} {{/* Article-specific OG tags */}} {{- if .IsPage -}} <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" /> <meta
property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" />
<meta property="article:author" content="{{ .Site.Params.author.name | default .Site.Title }}" />
<meta property="article:section" content="{{ .Section | title }}" />
{{- range .Params.tags -}}
<meta property="article:tag" content="{{ . }}" />
{{- end -}} {{- end -}}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description }}" />
<meta name="twitter:image" content="{{ $ogImage }}" />
<meta name="twitter:image:alt" content="{{ if .Params.featured_image_alt }}{{ .Params.featured_image_alt }}{{ else }}{{ $title }}{{ end }}" />
{{- if .Site.Params.social.twitter -}}
<meta name="twitter:site" content="{{ .Site.Params.social.twitter }}" />
<meta name="twitter:creator" content="{{ .Site.Params.social.twitter }}" />
{{- end -}}

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}" />

<!-- RSS Feed -->
{{- with .OutputFormats.Get "rss" -}}
<link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .Permalink }}" />
{{- end -}}

<!-- Preconnect for performance -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preconnect" href="https://www.youtube.com" />
<link rel="preconnect" href="https://img.youtube.com" />

<!-- JSON-LD Structured Data -->
{{ partial "structured-data.html" . }}
