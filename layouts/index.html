{{ define "main" }}
<!-- Hero Section -->
<section class="hero-section">
    {{ if .Site.Params.game.heroImage }}
    <div class="hero-background">
        <img src="{{ .Site.Params.game.heroImage | relURL }}" alt="{{ .Site.Params.game.title }} ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" class="hero-bg-image">
        <div class="hero-overlay"></div>
    </div>
    {{ end }}
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">{{ .Site.Params.game.title }}</h1>
            {{ if .Site.Params.game.tagline }}
            <p class="hero-tagline">{{ .Site.Params.game.tagline }}</p>
            {{ end }}
            
            <div class="hero-actions">
                {{ if .Site.Params.game.downloadUrl }}
                <a href="{{ .Site.Params.game.downloadUrl }}" class="btn btn-primary btn-lg hero-btn">
                    <span class="btn-icon">â¬‡</span>
                    ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                </a>
                {{ end }}
                {{ if .Site.Params.game.purchaseUrl }}
                <a href="{{ .Site.Params.game.purchaseUrl }}" class="btn btn-secondary btn-lg hero-btn">
                    <span class="btn-icon">ğŸ›’</span>
                    è³¼å…¥ã™ã‚‹
                </a>
                {{ end }}
            </div>
        </div>
    </div>
</section>

<!-- Game Features Section -->
<section class="game-features">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">ã‚²ãƒ¼ãƒ ã®ç‰¹å¾´</h2>
            <p class="section-description">ã“ã®ã‚²ãƒ¼ãƒ ã®é­…åŠ›çš„ãªæ©Ÿèƒ½ã‚’ã”ç´¹ä»‹ã—ã¾ã™</p>
        </div>
        
        <div class="features-grid">
            {{ range .Site.Params.game.features }}
            <div class="feature-card">
                <div class="feature-icon">
                    {{ .icon | safeHTML }}
                </div>
                <h3 class="feature-title">{{ .title }}</h3>
                <p class="feature-description">{{ .description }}</p>
            </div>
            {{ end }}
        </div>
    </div>
</section>

<!-- Media Preview Section -->
<section class="media-preview">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ & å‹•ç”»</h2>
            <p class="section-description">ã‚²ãƒ¼ãƒ ã®ç¾ã—ã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã¨è¿«åŠ›ã®ã‚ã‚‹ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã‚’ã”è¦§ãã ã•ã„</p>
        </div>
        
        <!-- Screenshots -->
        {{ if .Site.Params.game.screenshots }}
        <div class="screenshots-section">
            <h3 class="media-section-title">ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ</h3>
            <div class="screenshots-grid">
                {{ range first 6 .Site.Params.game.screenshots }}
                <div class="screenshot-item">
                    <img src="{{ .url | relURL }}" alt="{{ .alt }}" class="screenshot-image" loading="lazy">
                    {{ if .caption }}
                    <div class="screenshot-caption">{{ .caption }}</div>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
        
        <!-- Videos -->
        {{ if .Site.Params.game.videos }}
        <div class="videos-section">
            <h3 class="media-section-title">å‹•ç”»</h3>
            <div class="videos-grid">
                {{ range first 3 .Site.Params.game.videos }}
                <div class="video-item">
                    {{ if eq .type "youtube" }}
                    <div class="video-embed">
                        <iframe src="https://www.youtube.com/embed/{{ .url }}" 
                                title="{{ .title }}" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    {{ else }}
                    <div class="video-embed">
                        <video controls poster="{{ .thumbnail | relURL }}">
                            <source src="{{ .url | relURL }}" type="video/mp4">
                            ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã‚¿ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
                        </video>
                    </div>
                    {{ end }}
                    <div class="video-title">{{ .title }}</div>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
        
        <!-- Trailer Section -->
        {{ if .Site.Params.game.trailer }}
        <div class="trailer-section">
            <h3 class="media-section-title">å…¬å¼ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼</h3>
            <div class="trailer-container">
                {{ if eq .Site.Params.game.trailer.type "youtube" }}
                <div class="trailer-embed">
                    <iframe src="https://www.youtube.com/embed/{{ .Site.Params.game.trailer.url }}" 
                            title="{{ .Site.Params.game.trailer.title }}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                {{ else }}
                <div class="trailer-embed">
                    <video controls poster="{{ .Site.Params.game.trailer.thumbnail | relURL }}">
                        <source src="{{ .Site.Params.game.trailer.url | relURL }}" type="video/mp4">
                        ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã‚¿ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
                    </video>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </div>
</section>

<!-- Main Content -->
<section class="home-content">
    <div class="container">
        {{ .Content }}
        
        <!-- Recent News -->
        {{ $news := where .Site.RegularPages "Section" "news" | first 3 }}
        {{ if $news }}
        <section class="recent-news">
            <h2 class="section-title">æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2>
            <div class="row">
                {{ range $news }}
                <div class="col-md-4">
                    {{ partial "card.html" (dict 
                        "title" .Title 
                        "content" (.Summary | truncate 100) 
                        "image" .Params.featured_image 
                        "link" .RelPermalink
                        "class" "news-card"
                    ) }}
                </div>
                {{ end }}
            </div>
            <div class="text-center mt-4">
                <a href="{{ "news" | relURL }}" class="btn btn-primary">ã™ã¹ã¦ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¦‹ã‚‹</a>
            </div>
        </section>
        {{ end }}
    </div>
</section>
{{ end }}